<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Health Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
</head>
<body>
    <header><h1>Personal Health Tracker</h1></header>
    <main class="container">
        <section class="card">
            <h2>Vitals Tracker</h2>
            <form id="vitals-form">
                <div class="form-grid">
                    <input type="text" id="name" placeholder="Name" required> <input type="number" id="age" placeholder="Age" required> <input type="number" step="0.1" id="weight" placeholder="Weight (kg)" required> <input type="number" step="0.1" id="bmi" placeholder="BMI" required> <input type="number" step="0.1" id="body_fat_percentage" placeholder="Body Fat %" required> <input type="number" step="0.1" id="skeletal_muscle_percentage" placeholder="Skeletal Muscle %" required> <input type="number" step="0.1" id="fat_free_mass" placeholder="Fat-Free Mass (kg)" required> <input type="number" step="0.1" id="subcutaneous_fat" placeholder="Subcutaneous Fat %" required> <input type="number" id="visceral_fat" placeholder="Visceral Fat" required> <input type="number" step="0.1" id="body_water_percentage" placeholder="Body Water %" required> <input type="number" step="0.1" id="muscle_mass" placeholder="Muscle Mass (kg)" required> <input type="number" step="0.1" id="bone_mass" placeholder="Bone Mass (kg)" required> <input type="number" step="0.1" id="protein_percentage" placeholder="Protein %" required> <input type="number" id="bmr" placeholder="BMR (kcal)" required> <input type="number" id="metabolic_age" placeholder="Metabolic Age" required>
                </div>
                <button type="submit">Add Vitals Entry</button>
            </form>
        </section>

        <section class="card">
            <h2>Vitals History</h2>
            <div class="chart-container"><canvas id="vitalsChart"></canvas></div>
            <div class="table-container">
                <table id="vitals-table">
                    <thead><tr><th>Date</th><th>Weight (kg)</th><th>Body Fat %</th><th>Muscle Mass (kg)</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section class="card">
            <h2>AI Meal Analyzer</h2>
            <form id="meal-form">
                <label for="photo">Upload a photo of your meal:</label>
                <input type="file" id="photo" name="photo" accept="image/png, image/jpeg" required>
                
                <div class="image-preview-container">
                    <img src="" alt="Image Preview" id="image-preview" class="hidden">
                </div>

                <button type="submit" id="analyze-button">Analyze Meal</button>
            </form>

            <div id="meal-status" class="status-message hidden"></div>
            
            <div id="meal-result" class="meal-result-container hidden">
                <h3>Analysis Result</h3>
                <p><strong>Identified Foods:</strong> <span id="food-items"></span></p>
                <div id="nutrition-info"></div>
            </div>
        </section>
    </main>
    <footer><p>A Personal Project</p></footer>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
